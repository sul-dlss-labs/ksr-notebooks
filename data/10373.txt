An undercover police officer shot and killed a Bronx teenager who the police said tried to rob him at gunpoint on Thursday during a drug deal gone awry.

The shooting took place during an arranged meeting with the teenager, Nelson Reeves, 17, in the lobby of a building at 1409 Prospect Avenue, in the Morrisania section of the Bronx, shortly after 11 a.m., the police said.

According to investigators, the officer, an eight-year veteran of the department, handed Mr. Reeves $20 in exchange for crack cocaine, but then questioned either the amount he was given or its quality.

Mr. Reeves then demanded more money, prompting the officer to hand him another $20, the police said. When he insisted he needed even more money, the officer tried to comply, the police said, but Mr. Reeves pulled out a loaded .25-caliber semiautomatic handgun and said something to the effect of “I want all the money.”