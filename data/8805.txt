It was a recipe for disaster.

Eric "J-J" Ocasio III, a brokenhearted, 27-year-old father of three young children caught up in a bitter custody dispute with his estranged wife, was chugging vodka Monday as police negotiators tried to talk him into surrendering after he had shot a hostage team negotiator in the face.

But after almost three hours of talking and as Ocasio started to toss his shotgun out the second-floor window barrel first -- instead of butt first as police directed him -- SWAT officers opened fire with their AR-15 assault rifles, a witness said.

Ocasio died from two gunshot wounds, Chief of Detectives Dennis J. Richards said.

"I never saw anything like it in my life. I saw the bullets go into his chest and his right arm," said Alex Aponte, a friend of Ocasio, shaking his own body to re-create the impact of the bullets striking Ocasio.

Aponte watched the drama unfold from the window of a rear bedroom in an apartment that faces the Trinity Place carriage house where Ocasio was barricaded.

"Eric was a little drunk. He had one hand in his pocket. His body language was not focused on hurting anybody. He grabbed the shotgun with his other hand, and it wasn't even on the trigger. SWAT started yelling, 'No, no, no,' and began shooting," Aponte said.

Ocasio was shot while he was standing in the upper front windows of the small rear carriage house at 57 Trinity Place, where he had lived for the last three months, his friends said.

A reporter counted 26 bullet holes in a section of aluminum siding just below the windows and many more in the ceiling of the upper front room.

But not all of those bullet holes were from the last barrage, police said. Police fired some of the shots earlier, after Detective John C. Garcia was wounded in the face and right shoulder by the shotgun blast that Ocasio fired at about 12:30 p.m. when Garcia entered the backyard behind an armored vehicle and identified himself as a police officer.

SWAT members fired to protect other officers as they dragged Garcia from the yard, witnesses said. Garcia, 47, was then rushed to Erie County Medical Center. The shotgun pellets remain in him, with some close to his optic nerve, authorities said. He has been released from the medical center.

The second barrage of police gunfire occurred at about 2:45 p.m., when Ocasio pointed the shotgun out the window with the barrel facing police. Whether he intended to drop the gun without shooting it a second time will never be known. Police later recovered the gun near his body.

During earlier negotiations, Ocasio complied with a police demand that he toss his ammunition out the window, his friends said. Police, however, later found more ammunition in the apartment along with a bulletproof vest.

"We don't know if the shotgun was loaded," said Josua Cruz, who described himself as Ocasio's best friend. Cruz and his wife, Shirley Cintron, share a rear lower apartment in the front house at 57 Trinity with Aponte.

Cruz said he did not know his friend had purchased a shotgun or the bulletproof vest.

He said Ocasio was attempting to negotiate with police to allow him to smoke a cigarette with his brother before surrendering.

Initially, Ocasio did not drink the vodka but later began fixing himself mixed drinks of vodka and Sprite, police and witnesses said.

"I'm going to come down in 17 seconds and put the gun on the porch. All I want is my brother and to smoke a cigarette with him. You can have a SWAT guy with him," Cruz said he heard Ocasio tell police.

Jason, Ocasio's younger brother, was at the scene and repeatedly pleaded with him to surrender, according to Cruz. "Jason said: 'J-J, everything is going to be all right. They [the police] just want everything to be OK. I love you, and I'm here,' " Cruz said, quoting the younger brother. "It tore me apart hearing that."

Cruz said he heard Ocasio shout back: "Jason, all I want is to smoke a cigarette with you."

"He kept telling SWAT, 'All I need is to see my brother,' " Cruz said.

Homicide detectives and Internal Affairs Division officers are conducting separate investigations into the incident. A grand jury review also is expected.

Results from an autopsy conducted Tuesday determined Ocasio died from gunshot wounds.

Cintron said she saw Ruby Ocasio, Ocasio's estranged wife, as police started arriving at the scene at about 10:45 a.m.

"She was there with the two boys, and I asked Ruby what happened, and she just looked at me and walked away," Cintron said, adding that the mother and two sons live in North Buffalo. "She and Eric split up last July. All he wanted was his kids. He dreaded it when they would go home during the times he did get to have them."

Ocasio's widow denies that she withheld the children from him. "We weren't getting a divorce," Ruby Ocasio said. "He was a wonderful father, and we were trying to work things out. I don't know what happened. We were having a domestic, and it went from there."

Cintron, Cruz and Aponte all agreed that Eric Ocasio snapped under the pressure of a separation from his wife and children and her alleged refusals to let him see his sons, 23-month-old Ethan and 4-year-old Eric, on a regular basis. He also was the father of a 10-year-old daughter, Aarika, from a previous relationship.

Police said Eric Ocasio did not show up for work Monday morning at an East Side sheet metal factory and was sending workers suicidal text messages, prompting them to call 911 requesting that police check on his condition.

Soon after Central District police responded, there was a report of gunfire, and SWAT and Hostage Management Team members were summoned. Some area residents were evacuated, and nearby schools were placed on lockdown.

"I think he felt that, after the cop was injured, there was no turning back. He didn't want to go to jail," Cintron said. "Something just snapped."

Cruz said Ocasio moved here a number of years ago from Brooklyn and was in the final year of his union apprenticeship as a sheet metal worker.

There was no question Eric Ocasio had some problems in life.

In 2008, he declared bankruptcy, owing more than $13,000 in student loans, according to U.S. Bankruptcy Court records. At other times, his wages were garnisheed, and his bank account was frozen by financial institutions.

But in recent weeks, he acted like a man intent on living, according to Cintron, who said he was planning his 28th birthday on March 5, with intentions to rent a VIP room at a Chippewa Street nightclub. "He wanted us all to go and have a good time," she said.

Cruz, whose nickname is "Sway," said what pains him the most in this tragedy is that Eric Ocasio sent a text message from his cell phone to Cintron's phone.

"I'm a musician and I sing. Eric texted me saying, 'Please, Sway, sing to me. Put me at rest,' " Cruz said, trying to recall the exact last words from his best friend.