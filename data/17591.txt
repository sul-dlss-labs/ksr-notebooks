LAWRENCE (CBS) -- Police said a gunman who barricaded himself in his house on Melrose Street and fired on officers Tuesday afternoon took his own life.

Massachusetts State Police said around 3:30 p.m. that the threat was determined to be over. Lawrence Police entered the building after a standoff that lasted about three hours.

Lawrence Police Chief James Fitzpatrick said a 34-year-old woman, the gunman's girlfriend, was shot in the hand and grazed in the face by a bullet, and that she was in critical condition but alert and talking.

Police bring a woman from a Lawrence apartment to a waiting ambulance. (WBZ-TV)

The incident began when police responded to a call for shots fired at the apartment. As officers approached, police say the man, later identified as 34-year-old Antonio Gonzalez, fired at them with a long rifle.

No officers were hit during the gunfire.

A 4-year-old boy was rescued from the home during the standoff.

The boy, along with a 10-year-old who was at school during the incident, have been taken into DCF custody.

A young boy is rescued from a standoff in Lawrence. (WBZ-TV)

"We took great measures to make sure the child was taken out safely. He appears to have not suffered from any injuries," Fitzpatrick said.

Officials say the incident resulted from an apparent domestic dispute.

A friend says Gonzalez's girlfriend was trying to get a restraining order against him.

"She went to the police station to get a restraining order on him," Cleopatra Reynoso said. "When she came back here he was inside the house and everything happened."

"Domestic violence is something that's a societal problem for us," Lawrence Mayor Dan Rivera said. "We've got to figure this thing out. It's something that every community has to deal with."

The surrounding neighborhood in Lawrence was evacuated Tuesday afternoon as Mass. State Police and Lawrence Police surrounded the barricaded gunman.

Rivera said Gonzalez fired at Lawrence Police officers as they were responding to a call of shots fired. He said no officers had been hit.

Area schools were on "soft lockdown" as officers surrounded the building.