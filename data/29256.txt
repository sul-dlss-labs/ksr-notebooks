The streets were still dark when two deputy U.S. Marshals knocked on the door of a modest brick residence in the Wakefield section of the Bronx on Friday morning.

The marshals had spent days trying to locate Andre K. Sterling, a 35-year-old man wanted in connection with the shooting of a state trooper in Massachusetts two weeks ago.

The marshals had tracked Mr. Sterling to the two-story building on Ely Avenue in the Bronx, where he was possibly staying with a friend, a law enforcement official said, speaking anonymously to discuss an open investigation. When the marshals knocked at 5:30 a.m., an unknown man opened the door and invited them inside.

Moments later, the gunfire shattered the quiet morning. Mr. Sterling had emerged from another part of the home and opened fire, the official said, striking two of the marshals and touching off a shootout that left four people injured and Mr. Sterling dead.