Prosecutors today declined to file charges against a San Bernardino police officer who shot and killed a man armed with a knife in May.

Officer Brad Grantz was searching a home in the 100 block of South L Street on May 18 when Fernando Melgoza reached from behind a door and struck Grantz in the head with an unknown object.

Witnesses told police that Melgoza had been breaking windows in the home and talking about “killing everyone,” a report released by the San Bernardino County District Attorney’s Office said.

Grantz fired his gun three or four times at Melgoza. He died at the scene. Coroner’s officials said Melgoza sustained gunshot wounds to his head and arms.

“Clearly the actions Officer Grantz took in defending himself were reasonable and justified,” prosecutors wrote in the report.